<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#111827" />
  <title>NexusAlchemy ‚Äî Player</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="favicon.ico">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="mobile-web-app-capable" content="yes" />

  <style>
    :root{
      --bg:#0b1020; --panel:#111827; --text:#e5e7eb; --muted:#9ca3af;
      --accent:#60a5fa; --danger:#f87171; --ok:#34d399;
      --radius:16px; --pad:14px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    html,body{height:100%; background:var(--bg); color:var(--text); margin:0; font-family:var(--sans);}
    *{box-sizing:border-box;}
    .app{min-height:100%; display:flex; flex-direction:column;}
    header{padding:16px var(--pad); position:sticky; top:0; background:linear-gradient(to bottom, rgba(11,16,32,.98), rgba(11,16,32,.7)); backdrop-filter: blur(8px); z-index:10; border-bottom:1px solid rgba(255,255,255,.06);}
    header .title{font-size:18px; font-weight:700;}
    header .sub{font-size:12px; color:var(--muted); margin-top:4px;}
    main{flex:1; padding:12px var(--pad) 110px;}
    .card{background:rgba(17,24,39,.92); border:1px solid rgba(255,255,255,.06); border-radius:var(--radius); padding:14px; box-shadow: 0 10px 30px rgba(0,0,0,.25); margin-bottom:12px;}
    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
    .spacer{flex:1;}
    .btn{appearance:none; border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.04); color:var(--text);
         padding:10px 12px; border-radius:14px; font-weight:650; cursor:pointer;}
    .btn:active{transform: translateY(1px);}
    .btn.primary{background:rgba(96,165,250,.18); border-color:rgba(96,165,250,.45);}
    .btn.danger{background:rgba(248,113,113,.14); border-color:rgba(248,113,113,.40);}
    .btn.ok{background:rgba(52,211,153,.14); border-color:rgba(52,211,153,.40);}
    .badge{display:inline-block; padding:2px 8px; border:1px solid rgba(255,255,255,.14); border-radius:999px; font-size:12px; color:var(--muted); margin-left:6px;}

    .btn.small{padding:8px 10px; border-radius:12px; font-weight:650; font-size:13px;}
    .input, textarea, select{
      width:100%; border-radius:14px; border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03); color:var(--text);
      padding:10px 12px; font-size:14px; outline:none;
    }
    textarea{min-height:96px; font-family:var(--mono); font-size:12px;}
    .mono{font-family:var(--mono);}
    .muted{color:var(--muted);}
    .tag{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.10);
         background:rgba(255,255,255,.03); font-size:12px; color:var(--muted);}
    .grid{display:grid; grid-template-columns: 1fr; gap:10px;}
    @media (min-width: 520px){ .grid.two{grid-template-columns: 1fr 1fr;} 
    .grid.three{display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:10px;}
    @media (max-width:720px){ .grid.three{grid-template-columns:1fr;} }

}
    .list{display:flex; flex-direction:column; gap:10px;}
    .item{padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.03);}
    .item .top{display:flex; align-items:flex-start; gap:8px;}
    .item .name{font-weight:750;}
    .item .meta{font-size:12px; color:var(--muted);}
    .qty{font-weight:800; font-size:14px; padding:6px 10px; border-radius:12px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.18);}
    nav{position:fixed; z-index:1000; bottom:0; left:0; right:0; padding:10px 10px calc(10px + env(safe-area-inset-bottom));
        background:linear-gradient(to top, rgba(11,16,32,.98), rgba(11,16,32,.5));
        border-top:1px solid rgba(255,255,255,.06); backdrop-filter: blur(10px); display:flex; gap:8px; justify-content:space-between;}
    nav button{flex:1; touch-action:manipulation; -webkit-tap-highlight-color: transparent;}
    .hidden{display:none !important;}
    .hr{height:1px; background:rgba(255,255,255,.08); margin:12px 0;}
    .toast{position:fixed; left:50%; transform:translateX(-50%); bottom:84px; background:rgba(0,0,0,.72);
           border:1px solid rgba(255,255,255,.14); color:var(--text); padding:10px 12px; border-radius:999px; font-size:13px; z-index:50;}

    /* --- Cauldron crafting (DM-like) --- */
    .cauldron-grid{display:grid; grid-template-columns:1fr; gap:12px; align-items:center;}
    @media (min-width: 720px){ .cauldron-grid{grid-template-columns: 1fr 1fr;} }
    .slots{display:flex; flex-direction:column; gap:10px;}
    .slot{padding:12px; border-radius:14px; border:2px dashed rgba(120,120,135,0.45); background:rgba(28,22,38,0.88);
          display:flex; gap:10px; align-items:center;}
    .slot.filled{border-style:solid;}
    .slot .slot-label{flex:1; min-width:0;}
    .slot .slot-title{font-weight:750; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .slot .slot-sub{font-size:12px; color:var(--muted); margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .slot .slot-x{width:32px; height:32px; border-radius:12px; border:1px solid rgba(255,255,255,.14);
                 background:rgba(255,255,255,.05); color:var(--text); cursor:pointer;}
    .slot .slot-x:active{transform:translateY(1px);}

    .cauldron-canvas-wrap{display:flex; flex-direction:column; align-items:center; justify-content:center; gap:8px;}
    #cauldron-canvas{width:100%; max-width:420px; aspect-ratio:1/1; border-radius:999px;}
    .cauldron-hint{font-size:12px; text-align:center;}
  </style>
</head>
<body>
<div class="app">
  <header>
    <div class="title">NexusAlchemy ‚Äî Player</div>
    <div class="sub">–Ü–Ω–≤–µ–Ω—Ç–∞—Ä ‚Ä¢ –ö–æ—Ç–µ–ª ‚Ä¢ –†–µ—Ü–µ–ø—Ç–∏ ‚Ä¢ –û–±–º—ñ–Ω –∫–æ–¥–∞–º–∏</div>
  </header>

  <main>
    <section id="view-inv">
      <div class="card">
        <div class="row">
          <div>
            <div style="font-weight:800; font-size:16px;">–Ü–Ω–≤–µ–Ω—Ç–∞—Ä</div>
            <div class="muted" style="font-size:12px; margin-top:4px;">–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç—å –≤—ñ–¥ –º–∞–π—Å—Ç—Ä–∞ —á–µ—Ä–µ–∑ –∫–æ–¥–∏ –≤–∏–¥–∞—á—ñ —Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∫—Ä–∞—Ñ—Ç—É.</div>
          </div>
          <div class="spacer"></div>
          <button class="btn small danger" id="btn-reset">–°–∫–∏–Ω—É—Ç–∏ –¥–∞–Ω—ñ</button>
        </div>
        <div class="hr"></div>
        <div class="row">
          <input class="input" id="inv-filter" placeholder="–ü–æ—à—É–∫: —Å—É—Ç–Ω—ñ—Å—Ç—å –∞–±–æ —Ä—ñ–¥–∫—ñ—Å—Ç—å" />
        </div>
      </div>
      <div class="list" id="inv-list"></div>
      <div class="card muted" style="font-size:12px;">
        –ü–æ—Ä–∞–¥–∞: –∑–∞–ø–∏—Ç –Ω–∞ –∫—Ä–∞—Ñ—Ç —Ä–æ–±–∏—Ç—å—Å—è —É –≤–∫–ª–∞–¥—Ü—ñ <b>–ö—Ä–∞—Ñ—Ç</b> (–∫–æ–¥ <span class="mono">NXQ2|‚Ä¶</span> –∞–±–æ <span class="mono">NXREQ|‚Ä¶</span>).
      </div>
    </section>

    <section id="view-craft" class="hidden">
      <div class="card">
        <div class="row">
          <div>
            <div style="font-weight:800; font-size:16px;">–ö–æ—Ç–µ–ª</div>
            <div class="muted" style="font-size:12px; margin-top:4px;">
              –¢–æ—Ä–∫–Ω–∏—Å—å —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∞ <b>–∑ —ñ–Ω–≤–µ–Ω—Ç–∞—Ä—è</b>, —â–æ–± –¥–æ–¥–∞—Ç–∏ –π–æ–≥–æ —É —Å–ª–æ—Ç –∫–æ—Ç–ª–∞ (–º–∞–∫—Å. 5). –¶–µ <b>–Ω–µ –≤–∏—Ç—Ä–∞—á–∞—î</b> –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ ‚Äî –≤–∏—Ç—Ä–∞—Ç–∏/–¥–æ–¥–∞—Ç–∫–∏ –ø—Ä–∏–π–¥—É—Ç—å —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –º–∞–π—Å—Ç—Ä–∞ –∫–æ–¥–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∫—Ä–∞—Ñ—Ç—É.
            </div>
          </div>
          <div class="spacer"></div>
          <button class="btn small danger" id="btn-clear-cauldron">üßπ –û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—Ç–µ–ª</button>
        </div>

        <div class="hr"></div>

        <div class="cauldron-grid">
          <div>
            <div class="muted" style="font-size:12px; margin-bottom:8px;">–°–ª–æ—Ç–∏</div>
            <div id="cauldron-slots" class="slots"></div>
          </div>
          <div class="cauldron-canvas-wrap">
            <canvas id="cauldron-canvas" aria-label="Cauldron"></canvas>
            <div class="cauldron-hint muted">–ö–æ–ª—ñ—Ä ¬´—Ä—ñ–¥–∏–Ω–∏¬ª –∑–º—ñ–Ω—é—î—Ç—å—Å—è –≤—ñ–¥ —Å—É—Ç–Ω–æ—Å—Ç–µ–π —É —Å–ª–æ—Ç–∞—Ö</div>
          </div>
        </div>

        <div class="hr"></div>

        <div class="row">
          <div style="font-weight:800;">–Ü–Ω–≤–µ–Ω—Ç–∞—Ä –¥–ª—è –∫—Ä–∞—Ñ—Ç—É</div>
          <div class="spacer"></div>
          <span class="tag" id="craft-inv-meta">‚Äî</span>
        </div>
        <div class="list" id="craft-inv-list"></div>
      </div>

      <div class="card">
        <div class="row">
          <div style="font-weight:800;">–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏ –≤ –∑–∞–ø–∏—Ç—ñ</div>
          <div class="spacer"></div>
          <span class="tag" id="req-count">0 –ø–æ–∑–∏—Ü—ñ–π</span>
        </div>
        <div class="hr"></div>
        <div class="list" id="req-list"></div>
        <div class="hr"></div>

        <div class="row">
          <button class="btn primary" id="btn-make-req">–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–æ–¥ –∑–∞–ø–∏—Ç—É</button>
          <button class="btn" id="btn-copy-req">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
          <button class="btn" id="btn-share-req">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å</button>
        </div>
        <div style="margin-top:10px;">
          <textarea id="req-code" placeholder="–¢—É—Ç –∑ º—è–≤–∏—Ç—å—Å—è –∫–æ–¥ –∑–∞–ø–∏—Ç—É‚Ä¶"></textarea>
        </div>

        <div class="muted" style="font-size:12px; margin-top:10px;">
          –§–æ—Ä–º–∞—Ç: <span class="mono">NXQ2|‚Ä¶</span> (–∞–±–æ <span class="mono">NXREQ|‚Ä¶</span>) ‚Äî —Ü–µ –∑–∞–ø–∏—Ç –Ω–∞ –∫—Ä–∞—Ñ—Ç –¥–ª—è –º–∞–π—Å—Ç—Ä–∞.
        </div>
      </div>
    </section>

    <section id="view-recipes" class="hidden">
      <div class="card">
        <div class="row">
          <div>
            <div style="font-weight:800; font-size:16px;">–ö–Ω–∏–≥–∞ —Ä–µ—Ü–µ–ø—Ç—ñ–≤</div>
            <div class="muted" style="font-size:12px; margin-top:4px;">
              –¢—É—Ç –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏: <b>–Ω–∞–∑–≤–∞</b>, <b>—Ç–≤—ñ–π –æ–ø–∏—Å</b>, —ñ <b>–∑ —è–∫–∏—Ö —Å—É—Ç–Ω–æ—Å—Ç–µ–π –∑—Ä–æ–±–ª–µ–Ω–æ</b>.
            </div>
          </div>
          <div class="spacer"></div>
          <button class="btn small danger" id="btn-reset-recipes">–°–∫–∏–Ω—É—Ç–∏ —Ä–µ—Ü–µ–ø—Ç–∏</button>
          <input class="input" id="rec-filter" placeholder="–ü–æ—à—É–∫ (–Ω–∞–∑–≤–∞ –∞–±–æ —Å—É—Ç–Ω—ñ—Å—Ç—å)..." style="max-width:240px;" />
        </div>
      </div>
      <div class="list" id="rec-list"></div>
    </section>

    <section id="view-import" class="hidden">
      <div class="card">
        <div style="font-weight:800; font-size:16px;">–Ü–º–ø–æ—Ä—Ç –∫–æ–¥—É –≤—ñ–¥ –º–∞–π—Å—Ç—Ä–∞</div>
        <div class="muted" style="font-size:12px; margin-top:4px;">
          –í—Å—Ç–∞–≤–ª—è–π –∫–æ–¥–∏ <span class="mono">NXA2|‚Ä¶</span> (–∞–±–æ <span class="mono">NXA1|‚Ä¶</span>). –ü–æ–≤—Ç–æ—Ä–Ω–∏–π —ñ–º–ø–æ—Ä—Ç —Ç–æ–≥–æ –∂ –∫–æ–¥—É/–ø–∞–∫—É–Ω–∫–∞ –±–ª–æ–∫—É—î—Ç—å—Å—è.
        </div>
        <div class="hr"></div>
        <textarea id="imp-code" placeholder="–í—Å—Ç–∞–≤ –∫–æ–¥ –≤—ñ–¥ –º–∞–π—Å—Ç—Ä–∞‚Ä¶"></textarea>
        <div class="row" style="margin-top:10px;">
          <button class="btn primary" id="btn-import">–Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏</button>
          <button class="btn" id="btn-paste">–í—Å—Ç–∞–≤–∏—Ç–∏ –∑ –±—É—Ñ–µ—Ä–∞</button>
        </div>
      </div>

      <div class="card">
        <div class="row">
          <div style="font-weight:800;">–Ü—Å—Ç–æ—Ä—ñ—è (–æ—Å—Ç–∞–Ω–Ω—ñ 20)</div>
          <div class="spacer"></div>
          <button class="btn small" id="btn-export">–ï–∫—Å–ø–æ—Ä—Ç JSON (—Ä–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–ø—ñ—è)</button>
          <button class="btn small" id="btn-import-json">–Ü–º–ø–æ—Ä—Ç JSON</button>
        </div>
        <div class="hr"></div>
        <div id="hist-list" class="list"></div>
      </div>
    </section>
  </main>

  <nav>
    <button class="btn small" data-tab="inv">–Ü–Ω–≤–µ–Ω—Ç–∞—Ä</button>
    <button class="btn small" data-tab="craft">–ö—Ä–∞—Ñ—Ç</button>
    <button class="btn small" data-tab="recipes">–†–µ—Ü–µ–ø—Ç–∏</button>
    <button class="btn small" data-tab="import">–ö–æ–¥–∏</button>
  </nav>
</div>

<script src="app.js"></script>
<script>
  if('serviceWorker' in navigator){
    navigator.serviceWorker.register('./sw.js').catch(()=>{});
  }
</script>
</body>
</html>
